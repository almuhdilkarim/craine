#!/bin/bash

set -e

##
export black="\e[1;30m"
export red="\e[033;31m"
export green="\e[1;32m"
export yellow="\e[1;33m"
export blue="\e[1;34m"
export purple="\e[1;35m"
export cyan="\e[1;36m"
export lightGray="\e[1;37m"
export gray="\e[1;90m"
export lightRed="\e[1;91m"
export lightGreen="\e[1;92m"
export lightYellow="\e[1;93m"
export lightBlue="\e[1;94m"
export lightPurple="\e[1;95m"
export lightCyan="\e[1;96m"
export white="\e[1;97m"
export bold="\e[1m"
export faint="\e[2m"
export italic="\e[3m"
export underlined="\e[4m"
export blinking="\e[5m"
export reset="\e[0m"


function notifer_error() {
    echo -e "\t${red}┌─────────────────────────────────────────────────────┐"${reset}
    echo -e "\t${red}│    / \                                              │"${reset}
    echo -e "\t${red}│   / | \     CRAINE ERROR                            │"${reset}
    echo -e "\t${red}│  /  #  \    Something goes wrong, process aborted ! │"${reset}
    echo -e "\t${red}│ /_______\                                           │"${reset}
    echo -e "\t${red}└─────────────────────────────────────────────────────┘"${reset}
    test -n "$1" && echo -e "\t${red} Error ─> $1${reset}"
    exit 1
}

function notifer_warner() {
    test -n "$1" && echo -e "\t${red} [WRN] ─> $1${reset}"
}

function notifer_cheks() {
    test -n "$1" && echo -e "\t${blue} [CHK] ─> $1 passed ${reset}"
}

function notifer_inform() {
    test -n "$1" && echo -e "\t${green} [INF] ─> $1${reset}"
}

function banner_raptor() {
    cat "${srcpath}/banner" && echo ""
}


## 

function craine_varauth_noval() {
    if [[ -z $craine_auth ]];then
        notifer_error "Missing author parameter"   
    fi
}

function craine_varbase_noval() {
    if [[ -z $craine_base ]];then
        notifer_error "Missing group parameter"   
    fi
}

function craine_varname_noval() {
    if [[ -z $craine_name ]];then
        notifer_error "Missing name parameter"   
    fi
}

function craine_varlink_noval() {
    if [[ -z $craine_link ]];then
        notifer_error "Missing link parameter"   
    fi
}

function craine_varpitc_noval() {
    if [[ -z $craine_pitc ]];then
        notifer_error "Missing level parameter"   
    fi
}

function craine_vardirs_noval() {

    if [[ ! -d $1 ]]; then
        notifer_error "target directory does not exist"   
    fi
}

function craine_varrepo_exist() {

    craine_varlink_noval &&
    git ls-remote --exit-code $craine_link > /dev/null 2>&1 &&

    if [ $? -eq 0 ]; then
        echo true
    else
        echo $?
    fi
}

function craine_vardirs_exist() {

    if [[ -d $1 ]]; then
        notifer_error "installation directory is exist"   
    fi
}

function craine_varinet_exist() {

    git ls-remote --exit-code $1 > /dev/null 2>&1 &&
    if [ $? -eq 0 ]; then
        echo true
    else
        echo false
    fi
}


##
function craine_gitrepo_clone() {
    
    git clone $1 $2 > /dev/null 2>&1 &&

    if [ $? -eq 0 ]; then
        notifer_inform "clone remote repository success"
    else
        notifer_error "failed to cloned remote repository"
    fi
}

function craine_gitrepo_pushs() {

    notifer_inform "populate data from local source" &&
    cd $1 && git add . > /dev/null 2>&1  && 

    notifer_inform "commited data from local source" &&
    git commit -m "first commit" > /dev/null 2>&1 && 

    notifer_inform "updating remote repository data" &&
    git push > /dev/null 2>&1 

    unset $1
}

function craine_gitrepo_pulls() {

    notifer_inform "populate data from local source" &&
    cd $1 

    notifer_inform "cloned data from remote sources" &&
    git pull > /dev/null 2>&1 && 

    unset $1
}



## 
function craine_enviro() {
    if [[ -e "$1/posmak" ]]; then
        echo "" >> $raptor_makers  &&  cat "$1/posmak" >> $raptor_makers
    fi 
}

function craine_posted() {
    if [[ -e "$1/posmak" ]]; then
        echo "" >> $raptor_makers  &&  cat "$1/posmak" >> $raptor_makers
    fi 
}

function craine_mainer() {
    if [[ -e "$1/posmak" ]]; then
        echo "" >> $raptor_makers  &&  cat "$1/premak" >> $raptor_makers
    fi 
}

function craine_finish() {
    if [[ -e "$1/purmak" ]]; then
        echo "" >> $raptor_makers  &&  cat "$1/purmak" >> $raptor_makers
    fi 
}

## 
function craine_gitcek() {

    git ls-remote --exit-code $1 > /dev/null 2>&1 
    if [ $? -eq 0 ]; then
        echo true
    else
        echo false
    fi
}


function craine_netter() {

    if ping -c 1 "8.8.8.8" > /dev/null; then
        echo true
    else
        echo false
    fi
} 
